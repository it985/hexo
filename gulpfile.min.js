var gulp=require("gulp"),minifycss=require("gulp-clean-css"),uglify=require("gulp-uglify-es").default,htmlmin=require("gulp-htmlmin"),htmlclean=require("gulp-htmlclean"),imagemin=require("gulp-imagemin"),del=require("del"),Hexo=require("hexo"),minifyInlineJSON=require("gulp-minify-inline-json");gulp.task("clean",(function(){return del(["public/**/*"])}));var hexo=new Hexo(process.cwd(),{});gulp.task("generate",(function(cb){hexo.init().then((function(){return hexo.call("generate",{watch:!1})})).then((function(){return hexo.exit()})).then((function(){return cb()})).catch((function(err){return console.log(err),hexo.exit(err),cb(err)}))})),gulp.task("deploy",(function(){return hexo.init().then((function(){return hexo.call("deploy",{watch:!1}).then((function(){return hexo.exit()})).catch((function(err){return hexo.exit(err)}))}))})),gulp.task("minify-css",(function(){return gulp.src("./public/**/*.css").pipe(minifycss({compatibility:"ie8"})).pipe(gulp.dest("./public"))})),gulp.task("minify-html",(function(){return gulp.src("./public/**/*.html").pipe(htmlclean()).pipe(htmlmin({removeComments:!0,minifyJS:!0,minifyCSS:!0,minifyURLs:!0})).pipe(gulp.dest("./public"))})),gulp.task("minify-img",(function(){return gulp.src("./public/img/**/*").pipe(imagemin([imagemin.gifsicle({interlaced:!0}),imagemin.jpegtran({progressive:!0}),imagemin.optipng({optimizationLevel:5}),imagemin.svgo({plugins:[{removeViewBox:!0},{cleanupIDs:!1}]})])).pipe(gulp.dest("./public/img"))})),gulp.task("minify-js",(function(){return gulp.src("./public/**/*.js").pipe(uglify()).pipe(gulp.dest("./public"))})),gulp.task("minifyInlineJSON",(function(){return gulp.src("./public/**/*.html").pipe(minifyInlineJSON()).pipe(gulp.dest("./public"))})),gulp.task("compress",gulp.series("minify-html","minify-css","minify-img","minify-js","minifyInlineJSON")),gulp.task("default",gulp.series("clean","generate","compress","deploy"));