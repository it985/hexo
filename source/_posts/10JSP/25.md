---
title: 二十五、JSP XML 数据处理
abbrlink: e76ed29b
date: 2020-09-14 22:29:54

categories:
  - JSP
tags:
top_img: https://cn.bing.com/th?id=OHR.BasaltGiants_EN-US8165410401_UHD.jpg
cover: https://cn.bing.com/th?id=OHR.SpiralHill_EN-US8098037208_UHD.jpg
keywords:  
---
# 二十五、JSP XML 数据处理

## JSP XML 数据处理

当通过HTTP发送XML数据时，就有必要使用JSP来处理传入和流出的XML文档了，比如RSS文档。作为一个XML文档，它仅仅只是一堆文本而已，使用JSP创建XML文档并不比创建一个HTML文档难。

------

## 使用JSP发送XML

使用JSP发送XML内容就和发送HTML内容一样。唯一的不同就是您需要把页面的context属性设置为text/xml。要设置context属性，使用<%@page % >命令，就像这样：

```JSP
<%@ page contentType="text/xml" %>
```

接下来这个例子向浏览器发送XML内容：

```XML
<%@ page contentType="text/xml" %>

<books>
   <book>
      <name>Padam History</name>
      <author>ZARA</author>
      <price>100</price>
   </book>
</books>
```

使用不同的浏览器来访问这个例子，看看这个例子所呈现的文档树。

------

## 在JSP中处理XML

在使用JSP处理XML之前，您需要将与XML 和XPath相关的两个库文件放在\lib目录下：

- XercesImpl.jar：在这下载http://www.apache.org/dist/xerces/j/
- xalan.jar：在这下载http://xml.apache.org/xalan-j/index.html

books.xml文件:

```XML
<books>
<book>
  <name>Padam History</name>
  <author>ZARA</author>
  <price>100</price>
</book>
<book>
  <name>Great Mistry</name>
  <author>NUHA</author>
  <price>2000</price>
</book>
</books>
```

main.jsp文件：

```JSP
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="x" uri="http://java.sun.com/jsp/jstl/xml" %>

<html>
<head>
  <title>JSTL x:parse Tags</title>
</head>
<body>


Books Info:


<c:import var="bookInfo" url="http://localhost:8080/books.xml"/>

<x:parse xml="${bookInfo}" var="output"/>
<b>The title of the first book is</b>: 
<x:out select="$output/books/book[1]/name" />
<br>
<b>The price of the second book</b>: 
<x:out select="$output/books/book[2]/price" />

</body>
</html>
```

访问http://localhost:8080/main.jsp，运行结果如下：

```
BOOKS INFO:
The title of the first book is:Padam History 
The price of the second book: 2000
```

------

## 使用JSP格式化XML

这个是XSLT样式表style.xsl文件：

```JSP
<xsl:stylesheet xmlns:xsl= "http://www.w3.org/1999/XSL/Transform" version="1.0">

<xsl:output method="html" indent="yes"/>

<xsl:template match="/">
  <html>
  <body>
   <xsl:apply-templates/>
  </body>
  </html>
</xsl:template>

<xsl:template match="books">



      
    
        
        
        
      
    
  
          
        
          
        
          
        


</xsl:template>
</xsl:stylesheet>
```

这个是main.jsp文件：

```JSP
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="x" uri="http://java.sun.com/jsp/jstl/xml" %>

<html>
<head>
  <title>JSTL x:transform Tags</title>
</head>
<body>


Books Info:


<c:set var="xmltext">
  <books>
    <book>
      <name>Padam History</name>
      <author>ZARA</author>
      <price>100</price>
    </book>
    <book>
      <name>Great Mistry</name>
      <author>NUHA</author>
      <price>2000</price>
    </book>
  </books>
</c:set>

<c:import url="http://localhost:8080/style.xsl" var="xslt"/>
<x:transform xml="${xmltext}" xslt="${xslt}"/>

</body>
</html>
```

看看运行结果

更多关于使用JSTL处理XML的内容请查阅JSP标准标签库。